(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{10:function(t,e,n){"use strict";function o(t){this.$root=t,this.VOID=[s([])],this.NULL=[],this.GARBAGE=[],this.$check=function(){for(var t in this)if("$root"!==t&&"$check"!==t)try{g(this[t])}catch(e){m("When checking grammar rule '"+t+"'",e)}}}function r(t){return new c(t)}function i(t){return new u(t)}function s(t){return new l(t)}function a(t,e,n){return new d(t,e,n)}function c(t){this.content=t,this._string="$"+t,this.toString=function(){return this._string}}function u(t){this.content=t,this._string="{"+t+"}",this.toString=function(){return this._string}}function l(t){this.content=t,this._string="("+t.join("|")+")",this.toString=function(){return this._string}}function d(t,e,n){this.min=t,this.max=e,this.content=n,this._string=this.content+"<"+this.min+"-"+(this.max==1/0?"":this.max)+">",this.toString=function(){return this._string}}function m(t,e){throw void 0==e?TypeError(t):TypeError(t+"; "+e.message)}function g(t){try{for(var e in t.constructor!==Array&&m("Expected Array, found "+t.constructor.name),t)t[e].constructor==Array?g(t[e]):t[e].constructor!=String&&t[e].checkExpansion()}catch(n){m("When checking sequence expansion",n)}}n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"h",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"i",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"g",(function(){return d})),c.prototype.checkExpansion=function(){this.content.constructor!==String&&m("When checking Ref content; Expected String, found "+this.content.constructor.name)},u.prototype.checkExpansion=function(){this.content.constructor!==String&&m("When checking Tag content; Expected String, found "+this.content.constructor.name)},l.prototype.checkExpansion=function(){try{for(var t in this.content.constructor!==Array&&m("Expected Array, found "+this.content.constructor.name),this.content)g(this.content[t])}catch(e){m("When checking OneOf content",e)}},d.prototype.checkExpansion=function(){try{this.min.constructor===Number&&this.max.constructor===Number||m("Expected min/max to be Number, found "+this.min.constructor.name+"/"+this.max.constructor.name),0<=this.min&&this.min<=this.max||m("Expected 0 <= min <= max, found "+this.min+"/"+this.max),g(this.content)}catch(t){m("When checking Repeat content",t)}}},20:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parse}));var _srgs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);function LOG(t){}function clone(t){if(null==t||"object"!=typeof t)return t;var e=new t.constructor;for(var n in t)e[n]=clone(t[n]);return e}function isEmpty(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Chart(t){this.numberOfWords=t,this.passives=new Array(t),this.actives=new Array(t);for(var e=0;e<=t;e++)this.passives[e]={},this.actives[e]={};this.add=function(t){var e,n;return t.isPassive?(e=this.passives[t.start],n=t.lhs):(e=this.actives[t.end],n=t.next.content),n in e||(e[n]={}),!(t in e[n])&&(e[n][t]=t,!0)},this.resultsForRule=function(e,n=0,o=t){n=n||0,o=o||t;var r=[],i=this.passives[n][e];for(var s in i)i[s].end==o&&r.push(i[s].out);return r},this.allEdges=function(){return this.allPassiveEdges().concat(this.allActiveEdges())},this.allPassiveEdges=function(){var t=[];for(var e in this.passives)for(var n in this.passives[e])for(var o in this.passives[e][n])t.push(this.passives[e][n][o]);return t},this.allActiveEdges=function(){var t=[];for(var e in this.actives)for(var n in this.actives[e])for(var o in this.actives[e][n])t.push(this.actives[e][n][o]);return t},this.statistics=function(){var t=this.allPassiveEdges().length,e=this.allActiveEdges().length;return{nrEdges:t+e,nrPassiveEdges:t,nrActiveEdges:e}}}function PassiveEdge(t,e,n,o){this.start=t,this.end=e,this.lhs=n,this.out=o,this.isPassive=!0;var r="["+t+"-"+e+"] $"+n+" := "+o;this._string=r,this.toString=function(){return this._string}}function ActiveEdge(t,e,n,o,r,i,s,a){this.start=t,this.end=e,this.lhs=n,this.next=o,this.rest=r,this.out=i,this.rules=s,this.text=a,this.isPassive=!1;var c="<"+t+"-"+e+"> $"+n+" -> "+o+", "+r+" := "+i+" <- "+s;this._string=c,this.toString=function(){return this._string}}function parse(words,grammar,root,filter){root||(root=grammar.$root);var chart=new Chart(words.length),agenda=[],leftCornerFilter;function addToChart(inference,start,end,lhs,rhs,out,rules,text){var edge;if(rhs.length>0){var next=rhs[0],rest=rhs.slice(1);switch(next.constructor){case Array:return void addToChart(inference+",SEQUENCE",start,end,lhs,next.concat(rest),out,rules,text);case _srgs__WEBPACK_IMPORTED_MODULE_0__.g:var min=next.min,max=next.max;if(min<=0&&addToChart(inference+",SKIP",start,end,lhs,rest,out,rules,text),max>0){var content=next.content,rhs=1==max?[content]:[content,_srgs__WEBPACK_IMPORTED_MODULE_0__.f(min?min-1:min,max-1,content)];addToChart(inference+",REPEAT",start,end,lhs,rhs.concat(rest),out,rules,text)}return;case _srgs__WEBPACK_IMPORTED_MODULE_0__.c:var oneof=next.content;for(var i in oneof){var rhs=oneof[i].concat(rest);addToChart(inference+",ONEOF",start,end,lhs,rhs,out,rules,text)}return;case _srgs__WEBPACK_IMPORTED_MODULE_0__.i:return out=clone(out),rules=clone(rules),eval(next.content),void addToChart(inference+",TAG",start,end,lhs,rest,out,rules,text)}edge=new ActiveEdge(start,end,lhs,next,rest,out,rules,text)}else edge=new PassiveEdge(start,end,lhs,out);chart.add(edge)&&(LOG("+ "+inference+": "+edge),agenda.push(edge))}for(leftCornerFilter=void 0==filter?function(){return!0}:function(t,e){var n=filter[t];return!n||words[e]in n},addToChart("INIT",0,0,root,grammar[root],{},{},{});agenda.length>0;){var edge=agenda.pop(),start=edge.start,end=edge.end,lhs=edge.lhs,next=edge.next;if(LOG(edge),edge.isPassive){var actives=chart.actives[start][lhs];for(var i in actives){var active=actives[i],rules=clone(active.rules),text=active.text;text[edge.lhs]=words.slice(start,end).join(" "),"object"==typeof edge.out&&isEmpty(edge.out)?rules[edge.lhs]=text[edge.lhs]:rules[edge.lhs]=clone(edge.out),addToChart("COMBINE",active.start,end,active.lhs,active.rest,active.out,rules,text)}}else if(next.constructor==_srgs__WEBPACK_IMPORTED_MODULE_0__.e){var ref=next.content,passives=chart.passives[end][ref];for(var i in passives){var passive=passives[i],rules=clone(edge.rules),text=edge.text;rules[passive.lhs]=clone(passive.out),text[passive.lhs]=passive.text,addToChart("COMBINE",start,passive.end,lhs,edge.rest,edge.out,rules,text)}ref in grammar&&leftCornerFilter(ref,end)&&addToChart("PREDICT",end,end,ref,grammar[ref],{},{},{})}else next==words[end]&&addToChart("SCAN",start,end+1,lhs,edge.rest,edge.out,edge.rules,edge.text)}return chart}},31:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e),n.d(e,"promptAndAsk",(function(){return D})),n.d(e,"say",(function(){return T})),n.d(e,"listen",(function(){return I}));var o=n(28),r=n(5),i=(n(31),n(8),n(25)),s=n(12),a=n(2),c=n(22),u=n(46),l=n(45);function d(t,e,n=5e3){return{initial:"prompt",states:{prompt:{entry:T(t),on:{ENDSPEECH:"ask"}},ask:{entry:[Object(a.q)("LISTEN"),Object(a.q)("MAXSPEECH",{delay:n,id:"timeout"})]},nomatch:{entry:T(e),on:{ENDSPEECH:"prompt"}}}}}function m(t){return{initial:"prompt",states:{prompt:{entry:T(t)}}}}const g=function(t){return t.trim().split(" ")},h={John:{person:"John Appleseed"},Bob:{person:"Bob Marley"},Bill:{person:"Bill Gates"},Charlie:{person:"Charlie Spencer"},Angela:{person:"Angela Martin"},Michael:{person:"Michael Scott"},Pam:{person:"Pam Beesly"},Jim:{person:"Jim Halpert"},Dwight:{person:"Dwight Schrut"},Creed:{person:"Creed Bratton"},Toby:{person:"Toby Flenderson"},Saturday:{day:"Saturday"},Sunday:{day:"Sunday"},Monday:{day:"Monday"},Tuesday:{day:"Tuesday"},Wednesday:{day:"Wednesday"},Thursday:{day:"Thursday"},Friday:{day:"Friday"},"on Saturday":{day:"Saturday"},"on Sunday":{day:"Sunday"},"on Monday":{day:"Monday"},"on Tuesday":{day:"Tuesday"},"on Wednesday":{day:"Wednesday"},"on Thursday":{day:"Thursday"},"on Friday":{day:"Friday"},1:{meeting_time:"one"},2:{meeting_time:"two"},3:{meeting_time:"three"},4:{meeting_time:"four"},5:{meeting_time:"five"},6:{meeting_time:"six"},7:{meeting_time:"seven"},8:{meeting_time:"eight"},9:{meeting_time:"nine"},10:{meeting_time:"ten"},11:{meeting_time:"eleven"},12:{meeting_time:"twelve"},noon:{meeting_time:"twelve"},"at 1":{meeting_time:"one"},"at 2":{meeting_time:"two"},"at 3":{meeting_time:"three"},"at 4":{meeting_time:"four"},"at 5":{meeting_time:"five"},"at 6":{meeting_time:"six"},"at 7":{meeting_time:"seven"},"at 8":{meeting_time:"eight"},"at 9":{meeting_time:"nine"},"at 10":{meeting_time:"ten"},"at 11":{meeting_time:"eleven"},"at 12":{meeting_time:"twelve"},"at noon":{meeting_time:"twelve"}},p={yes:{string_bool:"yes"},sure:{string_bool:"yes"},"of course":{string_bool:"yes"},"that works":{string_bool:"yes"},yeah:{string_bool:"yes"},okay:{string_bool:"yes"},OK:{string_bool:"yes"},"no problem":{string_bool:"yes"},absolutely:{string_bool:"yes"},nope:{string_bool:"no"},no:{string_bool:"no"},"no way":{string_bool:"no"},"not at all":{string_bool:"no"},impossible:{string_bool:"no"},"not really":{string_bool:"no"},"not sure":{string_bool:"no"}},b=["help","I don't know","I don't understand","help me","I need help","what does this mean","wait what","no wait","what do you mean","what the hell"],f={initial:"welcome",id:"appointment",states:{init:{on:{CLICK:{target:"welcome"}}},welcome:Object(r.a)(Object(r.a)({},m("Let's create an appointment")),{},{on:{ENDSPEECH:"fill_appointment_info"}}),fill_appointment_info:{initial:"who",on:{RECOGNISED:{target:"help",cond:t=>b.includes(t.recResult)},MAXSPEECH:[{cond:t=>t.count<3,target:"maxspeech"},{cond:t=>null==t.count,actions:Object(a.b)((t=>({count:Number(0)}))),target:"maxspeech"}]},states:{hist:{type:"history"},who:Object(r.a)(Object(r.a)({},d("Who are you meeting with?","Sorry I don't know them",7e3)),{},{on:{RECOGNISED:[{cond:t=>t.recResult.includes("at")&&t.recResult.includes("on")&&1==g(t.recResult).indexOf("at")&&3==g(t.recResult).indexOf("on")&&"person"in(h[g(t.recResult)[0]]||{})&&"meeting_time"in(h[g(t.recResult)[2]]||{})&&"day"in(h[g(t.recResult)[4]]||{}),actions:[Object(a.b)((t=>({person:g(t.recResult)[0]}))),Object(a.b)((t=>({day:g(t.recResult)[4]}))),Object(a.b)((t=>({meeting_time:g(t.recResult)[2]})))],target:"confirm_time"},{cond:t=>t.recResult.includes("at")&&t.recResult.includes("on")&&"person"in(h[g(t.recResult)[0]]||{})&&"meeting_time"in(h[g(t.recResult)[4]]||{})&&"day"in(h[g(t.recResult)[2]]||{}),actions:[Object(a.b)((t=>({person:g(t.recResult)[0]}))),Object(a.b)((t=>({day:g(t.recResult)[2]}))),Object(a.b)((t=>({meeting_time:g(t.recResult)[4]})))],target:"confirm_time"},{cond:t=>t.recResult.includes("on")&&"person"in(h[g(t.recResult)[0]]||{})&&"day"in(h[g(t.recResult)[2]]||{}),actions:[Object(a.b)((t=>({person:g(t.recResult)[0]}))),Object(a.b)((t=>({day:g(t.recResult)[2]})))],target:"whole_day"},{cond:t=>t.recResult.includes("at")&&"person"in(h[g(t.recResult)[0]]||{})&&"meeting_time"in(h[g(t.recResult)[2]]||{}),actions:[Object(a.b)((t=>({person:g(t.recResult)[0]}))),Object(a.b)((t=>({meeting_time:g(t.recResult)[2]})))],target:"day"},{cond:t=>"person"in(h[t.recResult]||{}),actions:Object(a.b)((t=>({person:h[t.recResult].person}))),target:"day"},{cond:t=>!b.includes(t.recResult),target:".nomatch"}]}}),day:Object(r.a)(Object(r.a)({},d("OK . what day is your meeting?","Sorry I don't understand")),{},{on:{RECOGNISED:[{cond:t=>t.recResult.includes("at")&&t.recResult.includes("on")&&2==g(t.recResult).indexOf("at")&&"meeting_time"in(h[g(t.recResult)[3]]||{})&&"day"in(h[g(t.recResult)[1]]||{}),actions:[Object(a.b)((t=>({person:g(t.recResult)[0]}))),Object(a.b)((t=>({day:g(t.recResult)[4]}))),Object(a.b)((t=>({meeting_time:g(t.recResult)[2]})))],target:"confirm_time"},{cond:t=>null!=t.meeting_time&&"day"in(h[t.recResult]||{}),actions:[Object(a.b)((t=>({day:t.recResult})))],target:"confirm_time"},{cond:t=>"day"in(h[g(t.recResult)[1]]||{})&&"whole"in g(t.recResult)&&"day"in g(t.recResult),actions:Object(a.b)((t=>({day:h[t.recResult].day}))),target:"confirm_whole"},{cond:t=>"day"in(h[t.recResult]||{}),actions:Object(a.b)((t=>({day:h[t.recResult].day}))),target:"whole_day"},{cond:t=>!b.includes(t.recResult),target:".nomatch"}]}}),whole_day:Object(r.a)(Object(r.a)({},d("OK. Will it take the whole day?","Sorry I don't understand")),{},{on:{RECOGNISED:[{cond:t=>"string_bool"in(p[t.recResult]||{})&&"yes"===p[t.recResult].string_bool,actions:Object(a.b)((t=>({string_bool:p[t.recResult].string_bool}))),target:"confirm_whole"},{cond:t=>"string_bool"in(p[t.recResult]||{})&&"no"===p[t.recResult].string_bool,actions:Object(a.b)((t=>({string_bool:p[t.recResult].string_bool}))),target:"time"},{cond:t=>!b.includes(t.recResult),target:".nomatch"}]}}),time:Object(r.a)(Object(r.a)({},d("OK. what time is your meeting?","sorry i dont understand")),{},{on:{RECOGNISED:[{cond:t=>"meeting_time"in(h[t.recResult]||{}),actions:Object(a.b)((t=>({meeting_time:h[t.recResult].meeting_time}))),target:"confirm_time"},{cond:t=>!b.includes(t.recResult),target:".nomatch"}]}}),confirm_time:{initial:"prompt",on:{RECOGNISED:[{cond:t=>"string_bool"in(p[t.recResult]||{})&&"yes"===p[t.recResult].string_bool,actions:Object(a.b)((t=>({string_bool:p[t.recResult].string_bool}))),target:"created"},{cond:t=>"string_bool"in(p[t.recResult]||{})&&"no"===p[t.recResult].string_bool,actions:Object(a.b)((t=>({string_bool:p[t.recResult].string_bool}))),target:"who"},{cond:t=>!b.includes(t.recResult),target:".nomatch"}]},states:{prompt:{entry:Object(a.q)((t=>({type:"SPEAK",value:"OK. do you want me to create an appointment with ".concat(t.person," on ").concat(t.day," at ").concat(t.meeting_time,"?")}))),on:{ENDSPEECH:"ask"}},ask:{entry:I()},nomatch:{entry:T("Sorry I don't understand"),on:{ENDSPEECH:"prompt"}}}},confirm_whole:{initial:"prompt",on:{RECOGNISED:[{cond:t=>"string_bool"in(p[t.recResult]||{})&&"yes"===p[t.recResult].string_bool,actions:Object(a.b)((t=>({string_bool:p[t.recResult].string_bool}))),target:"created"},{cond:t=>"string_bool"in(p[t.recResult]||{})&&"no"===p[t.recResult].string_bool,actions:Object(a.b)((t=>({string_bool:p[t.recResult].string_bool}))),target:"who"},{cond:t=>!b.includes(t.recResult),target:".nomatch"}]},states:{prompt:{entry:Object(a.q)((t=>({type:"SPEAK",value:"OK. do you want me to create an appointment with ".concat(t.person," on ").concat(t.day," for the whole day?")}))),on:{ENDSPEECH:"ask"}},ask:{entry:I()},nomatch:{entry:T("Sorry I don't understand"),on:{ENDSPEECH:"prompt"}}}},created:Object(r.a)(Object(r.a)({},m("Your appointment has been created")),{},{on:{ENDSPEECH:"#root.dm.welcome"}})}},maxspeech:Object(r.a)(Object(r.a)({},m("I will repeat")),{},{on:{ENDSPEECH:{actions:Object(a.b)((t=>({count:t.count+1}))),target:"fill_appointment_info.hist"}}}),help:Object(r.a)(Object(r.a)({},m("You are a big boy, you need no help")),{},{on:{ENDSPEECH:"fill_appointment_info.hist"}}),guards:{}}},_={initial:"welcome",states:{welcome:{initial:"prompt",states:{prompt:{entry:T("Welcome to your to do items. You have nothing to do. so, bye bye.")}}}}},y={initial:"welcome",states:{welcome:Object(r.a)({on:{RECOGNISED:{target:"duration",actions:Object(a.b)((t=>({duration:t.recResult})))}}},D("For how long do you want to set the timer?")),duration:{invoke:{id:"timer",src:(t,e)=>S(t.duration),onDone:{target:"set",actions:[Object(a.b)(((t,e)=>({intent:e.data.intent.name}))),(t,e)=>console.log(e.data)]},onError:{target:"welcome",actions:(t,e)=>console.log(e.data)}}},set:{entry:Object(a.q)("ENDSPEECH"),on:{ENDSPEECH:[{target:"confirmation",cond:t=>"time"===t.intent},{target:"nomatch"}]}},confirmation:{entry:Object(a.q)((t=>({type:"SPEAK",value:"OK. time set ".concat(t.duration)})))},nomatch:{entry:Object(a.q)((t=>({type:"SPEAK",value:"I don't understand. ".concat(t.duration," doesn't seem like a time duration")}))),on:{ENDSPEECH:"welcome"}}}};var E=n(10);function O(t){for(var e=function(t){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(t,"application/xml");if("undefined"!=typeof ActiveXObject){var e=XML.newDocument();return e.loadXML(t),e}var n="data:text/xml;charset=utf-8,"+encodeURIComponent(t),o=new XMLHttpRequest;return o.open("GET",n,!1),o.send(null),o.responseXML}(t),n=e.getElementsByTagName("grammar")[0].getAttribute("root"),o=new E.a(n),r=e.getElementsByTagName("rule"),i=0;i<r.length;i++){var s=r[i];o[s.getAttribute("id")]=v(s)}return o}function v(t){for(var e=t.childNodes,n=[],o=0;o<e.length;o++)if(3==e[o].nodeType){var r=e[o].textContent.trim();""!=r&&n.push(r.split(/ +/))}else if(1==e[o].nodeType)if("token"==e[o].nodeName)n.push(E.h(e[o].textContent));else if("ruleref"==e[o].nodeName){var i=e[o].getAttribute("uri");n.push(E.d(i.slice(1)))}else if("tag"==e[o].nodeName)n.push(E.h(e[o].textContent.trim()));else if("one-of"==e[o].nodeName)n.push(E.b(v(e[o])));else if("item"==e[o].nodeName){var s=e[o].getAttribute("repeat");if(s){var a=s.split("-"),c=parseInt(a[0]),u=parseInt(a[1]);u=u||1/0,n.push(E.f(c,u,v(e[o])))}else n.push(v(e[o]))}else console.log(e[o]);return n}var j=n(20);const R=t=>{const e=O('\n<grammar root="home">\n    <rule id="home">\n        <ruleref uri="#command"/>\n        <tag>out.command= new Object(); out.command.object = rules.command.thing; out.command.action = rules.command.todo; </tag>\n    </rule>\n    <rule id="actions"> \n        <one-of> \n            <item> open </item> \n            <item> close </item> \n        </one-of> \n    </rule>\n    <rule id="actions2"> \n        <one-of> \n            <item> on </item> \n            <item> off </item> \n        </one-of> \n    </rule>\n   <rule id="objects"> \n        <one-of> \n            <item> window </item> \n            <item> door </item> \n        </one-of> \n    </rule>\n    <rule id="objects2"> \n        <one-of> \n            <item> light </item> \n            <item> lights <tag> out = \'light\'; </tag></item>\n            <item> heat </item> \n            <item> AC <tag> out = \'air conditioning\'; </tag></item> \n            <item> A C <tag> out = \'air conditioning\'; </tag></item> \n            <item> air conditioning </item> \n        </one-of> \n    </rule>\n     \n    <rule id="command">\n        <item repeat="0-">please</item>\n            <one-of> \n                <item>\n                    <ruleref uri="#actions"/>\n                    <tag>out.todo=rules.actions;</tag>\n                    the\n                    <ruleref uri="#objects"/>\n                    <tag>out.thing=rules.objects;</tag>\n                </item> \n                <item>\n                    turn\n                    <ruleref uri="#actions2"/>\n                    <tag>out.todo=rules.actions2;</tag>\n                    the\n                    <ruleref uri="#objects2"/>\n                    <tag>out.thing=rules.objects2;</tag>\n                </item> \n                <item>\n                    turn the\n                    <ruleref uri="#objects2"/>\n                    <tag>out.thing=rules.objects2;</tag> \n                    <ruleref uri="#actions2"/>\n                    <tag>out.todo=rules.actions2;</tag> \n                </item> \n            </one-of> \n    </rule>\n</grammar>\n'),n=Object(j.a)(t.split(/\s+/),e).resultsForRule(e.$root)[0];return"action to perform is, "+n.command.action+". on object, "+n.command.object},w={initial:"welcome",states:{welcome:{initial:"prompt",on:{ENDSPEECH:"task"},states:{prompt:{entry:T("Welcome to Smart Home")}}},task:Object(r.a)({initial:"prompt",on:{RECOGNISED:{target:"perform",actions:Object(a.b)((t=>({rule:R(t.recResult)})))}}},D("What would you like me to do?")),perform:{initial:"prompt",states:{prompt:{entry:Object(a.q)((t=>({type:"SPEAK",value:"OK ".concat(t.rule,".")})))}}}}},S=t=>fetch(new Request("https://cors-anywhere.herokuapp.com/https://dialogue-management.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://maraev.me"},body:'{"text": "'.concat(t,'"}')})).then((t=>t.json())),x=O('\n<grammar root="funny_quotes">\n\n   <rule id="funny_quotes">\n      <ruleref uri="#quote"/>\n      <tag>out.quote = new Object(); out.quote.source=rules.quote.said_by;</tag>\n   </rule>\n\n   <rule id="quotes">\n      <one-of>\n         <item>do be do be do<tag>out="Sinatra";</tag></item>\n         <item>to be is to do<tag>out="Sartre";</tag></item>\n         <item>to do is to be<tag>out="Socrates";</tag></item>\n      </one-of>\n   </rule>\n\n   <rule id="quote">\n      <ruleref uri="#quotes"/>\n      <tag>out.said_by=rules.quotes;</tag>\n   </rule>\n   \n</grammar>\n    \n'),C=Object(j.a)("to do is to be".split(/\s+/),x).resultsForRule(x.$root)[0];console.log(C);const P={initial:"init",states:{init:{on:{CLICK:"welcome"}},welcome:Object(r.a)({on:{RECOGNISED:{target:"statement",actions:Object(a.b)((t=>({statement:t.recResult})))}}},D("What would you like to do?")),statement:{invoke:{id:"nlu",src:(t,e)=>S(t.statement),onDone:{target:"check_intent",actions:[Object(a.b)(((t,e)=>({intent:e.data.intent.name}))),(t,e)=>console.log(e.data)]},onError:{target:"welcome",actions:(t,e)=>console.log(e.data)}}},check_intent:{entry:Object(a.q)("ENDSPEECH"),on:{ENDSPEECH:[{target:"appointment",cond:t=>"appointment"===t.intent},{target:"item",cond:t=>"todo_item"===t.intent},{target:"timer",cond:t=>"timer"===t.intent},{target:"smart_home",cond:t=>"smart_home"===t.intent},{target:"welcome"}]}},appointment:Object(r.a)({},f),item:Object(r.a)({},_),timer:Object(r.a)({},y),smart_home:Object(r.a)({},w)}};var N=n(23),k=n(14);const A=s.a.cancel;function D(t){return{initial:"prompt",states:{prompt:{entry:T(t),on:{ENDSPEECH:"ask"}},ask:{entry:Object(a.q)("LISTEN")}}}}function T(t){return Object(a.q)((e=>({type:"SPEAK",value:t})))}function I(){return Object(a.q)("LISTEN")}Object(l.a)({url:"https://statecharts.io/inspect",iframe:!1});const M=Object(c.a)({id:"root",type:"parallel",states:{dm:Object(r.a)({},P),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(a.b)(((t,e)=>({ttsAgenda:e.value})))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(a.b)(((t,e)=>({recResult:e.value})))],target:".match"},RECOGNISED:{target:"idle",actions:[A("timeout"),Object(a.b)((t=>({count:Number(0)})))]},MAXSPEECH:"idle"},states:{progress:{},match:{entry:Object(a.q)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:t=>{console.log("<< ASR: "+t.recResult)},test:()=>{console.log("test")},logIntent:t=>{console.log("<< NLU intent: "+t.nluData.intent.name)}}}),q=t=>{switch(!0){case t.state.matches({asrtts:"recognising"}):return Object(k.jsx)("button",Object(r.a)(Object(r.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},t),{},{children:"Listening..."}));case t.state.matches({asrtts:"speaking"}):return Object(k.jsx)("button",Object(r.a)(Object(r.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},t),{},{children:"Speaking..."}));default:return Object(k.jsx)("button",Object(r.a)(Object(r.a)({type:"button",className:"glow-on-hover"},t),{},{children:"Click to start"}))}};function L(){const t=Object(N.useSpeechSynthesis)({onEnd:()=>{d("ENDSPEECH")}}),e=t.speak,n=t.cancel,r=(t.speaking,Object(N.useSpeechRecognition)({onResult:t=>{d({type:"ASRRESULT",value:t})}})),i=r.listen,s=(r.listening,r.stop),a=Object(u.b)(M,{devTools:!0,actions:{recStart:Object(u.a)((()=>{console.log("Ready to receive a color command."),i({interimResults:!1,continuous:!0})})),recStop:Object(u.a)((()=>{console.log("Recognition stopped."),s()})),changeColour:Object(u.a)((t=>{console.log("Repainting..."),document.body.style.background=t.recResult})),ttsStart:Object(u.a)(((t,n)=>{console.log("Speaking..."),e({text:t.ttsAgenda})})),ttsCancel:Object(u.a)(((t,e)=>{console.log("TTS STOP..."),n()}))}}),c=Object(o.a)(a,3),l=c[0],d=c[1];c[2];return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(q,{state:l,onClick:()=>d("CLICK")})})}const H=document.getElementById("root");i.render(Object(k.jsx)(L,{}),H)}},[[42,1,2]]]);
//# sourceMappingURL=main.cfb940c4.chunk.js.map